<!DOCTYPE html>
<html>
<head>
    <title>Live Safety Violation Detection</title>
    <style>
        body { text-align:center; font-family:Arial; margin-top:50px; background:#f0f0f0;}
        input[type=file], button { margin:20px; padding:10px; font-size:16px;}
        .message { color:red; font-weight:bold; margin-top:20px;}
        video,img { border:2px solid black; border-radius:10px; width:720px; height:480px; margin-top:20px;}
    </style>
</head>
<body>
    <h1>Live Safety Violation Detection</h1>
    <input type="file" id="videoFile">
    <button id="startBtn">Start Detection</button>
    <div class="message" id="msg"></div>
    <img id="liveFeed" />

    <script>
        const startBtn = document.getElementById("startBtn");
        const fileInput = document.getElementById("videoFile");
        const msgEl = document.getElementById("msg");
        const liveFeed = document.getElementById("liveFeed");

        startBtn.addEventListener("click", async ()=>{
            if(!fileInput.files[0]) { alert("Select a video!"); return; }
            startBtn.disabled=true;
            msgEl.textContent="Uploading video...";
            const data=new FormData();
            data.append("file",fileInput.files[0]);
            await fetch("/upload",{method:"POST",body:data});
            msgEl.textContent="Starting detection...";
            liveFeed.src="/video_feed";
        });
    </script>
</body>
</html>
